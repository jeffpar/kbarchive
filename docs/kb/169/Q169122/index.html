<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=231b77c990cb1dad78d33119176ff1f53331eb63">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Q169122: Non-rfc Compliant DHCP Server Does Not Send DHCPNAK to Client | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Q169122: Non-rfc Compliant DHCP Server Does Not Send DHCPNAK to Client" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/169/Q169122/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/169/Q169122/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/169/Q169122/","headline":"Q169122: Non-rfc Compliant DHCP Server Does Not Send DHCPNAK to Client","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q169122-non-rfc-compliant-dhcp-server-does-not-send-dhcpnak-to-client">Q169122: Non-rfc Compliant DHCP Server Does Not Send DHCPNAK to Client</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q169122
Product(s): Microsoft Windows NT
Version(s): 4.0
Operating System(s): 
Keyword(s): kb3rdparty kbnetwork
Last Modified: 25-FEB-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Workstation version 4.0 
- Microsoft Windows NT Server version 4.0 
-------------------------------------------------------------------------------

SUMMARY
=======

When a Windows NT DHCP client is moved to another subnet (without issuing the
ipconfig/release command before moving), the client will request its previous IP
address. Usually this IP address is not valid for usage on the new subnet.

When a DHCP server detects that the client requests an IP address that does not
fit for the current subnet, the DHCP server must send a DHCPNAK to the client
(according to RFC1541).

Some non-rfc compliant DHCP servers do not send this DHCPNAK. Because of this,
the client does not attempt to lease a new IP address on the new subnet and
tries to use its old IP address (see the frame information later in this
article).

This problem has been experienced only when using a third-party DHCP server. The
Microsoft Windows NT DHCP server does not experience this behavior.

MORE INFORMATION
================

Per RFC1541, a DHCP server sends a DHCPNAK to a client that requests an IP
address but is not located on the current subnet. According to RFC1541 (page
28):

  In particular, if the previously allocated network address in the ciaddr
  field from the client does not match the network address recorded by the
  server for that client, the server sends a DHCPNAK to the client.

After receiving a DHCPNAK, the DHCP client will restart the DHCP lease process by
sending DHCPDISCOVER.


RESOLUTION
==========

Contact the non-rfc compliant DHCP server vendor for assistance or use the
Microsoft Windows NT DHCP server.

Additional query words: SRD970304000093

======================================================================
Keywords          : kb3rdparty kbnetwork 
Technology        : kbWinNTsearch kbWinNTWsearch kbWinNTW400 kbWinNTW400search kbWinNT400search kbWinNTSsearch kbWinNTS400search kbWinNTS400
Version           : :4.0

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>