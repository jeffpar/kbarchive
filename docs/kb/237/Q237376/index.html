<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=4c5dc89ca309d19d6d9171a268a55a16d7399494">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Q237376: Extra Restart Required after Installing SNA 4.0 SP2 with HSI | KnowledgeBase Archive</title>
<meta property="og:title" content="Q237376: Extra Restart Required after Installing SNA 4.0 SP2 with HSI" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/237/Q237376/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/237/Q237376/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"name":null,"description":"An Archive of Early Microsoft KnowledgeBase Articles","author":null,"@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/237/Q237376/","publisher":null,"image":null,"headline":"Q237376: Extra Restart Required after Installing SNA 4.0 SP2 with HSI","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q237376-extra-restart-required-after-installing-sna-40-sp2-with-hsi">Q237376: Extra Restart Required after Installing SNA 4.0 SP2 with HSI</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q237376
Product(s): Microsoft SNA Server
Version(s): WINDOWS:4.0 SP2
Operating System(s): 
Keyword(s): kbsna400sp2kbfaq
Last Modified: 05-AUG-1999

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft SNA Server, version 4.0 SP2 
-------------------------------------------------------------------------------

Note: This article only applies to first time installs of SNA Server running 4.0 Service Pack 2 with Host Security Integration (HSI). Details are listed in the MORE INFORMATION section below.

SYMPTOMS
========

Immediately after you install and configure SNA Server and populate the Host
Account Cache (HAC), Host Security Integration will work correctly; however, the
next time you restart the computer, the HAC is corrupted. When this occurs, any
applications that use cached entries will fail, and the following application
events are logged in the Event Viewer:

  Event 1247 - Unable to decrypt data supplied code 0x80090005

  Event 1283 - Databases has been corrupted - contact system support supplied
  code 0x1

CAUSE
=====

The SnaDatabase registry key where the HAC database file is stored is being
reset when you restart the server after populating the HAC. The reset causes the
HAC database file (Dbase.dbs) to become corrupted.

WORKAROUND
==========

Perform an "extra restart" after you install Host Security, but before
populating the HAC (as indicated in the MORE INFORMATION section below).

Note: There is no workaround for this problem once the HAC becomes corrupted. In
order to recover, the cached entries must be repopulated again by using the Host
Account Manager (UDConfig.exe) or by using the command-line utility SNACFG.

STATUS
======

Microsoft has confirmed this to be a problem in SNA Server 4.0 Service Pack 2
(refresh). The refresh version is defined as SNA 4.0, which includes Service
Pack 2.

MORE INFORMATION
================

The following is a list of steps where this problem can occur:

1. Install SNA 4.0 SP2 (refresh) along with the Host Security Integration
  functions, and then restart the computer as directed.

2. Populate the Host Account Cache using Host Account Manager (UDConfig.exe),
  and then verify that the HAC is functioning properly.

3. Restart the computer.

4. Try using an HAC entry again. This time it will fail and log the events 1247
  and 1243.

The following is a list of steps where this problem can be avoided:

1. Install SNA 4.0 SP2 (refresh) along with the Host Security Integration
  functions, and then restart the computer as directed.

2. Restart the server again. This is the second (extra) restart. You will not be
  prompted for this restart.

3. Populate the Host Account Cache using Host Account Manager (UDConfig.exe),
  and then verify that the HAC is functioning properly.

4. Restart the computer.

5. This time when you use an HAC entry, the process will continue to work.

Note: This problem has not been seen with existing SNA 4.0 SP1 users who have
been using HSI and have upgraded to SP2.

Additional query words:

======================================================================
Keywords          : kbsna400sp2 kbfaq
Technology        : kbAudDeveloper kbSNAServSearch kbSNAServ400SP2
Version           : WINDOWS:4.0 SP2
Issue type        : kbbug
Solution Type     : kbpending

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="http://github.com/jeffpar">jeffpar</a><br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>