<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=231b77c990cb1dad78d33119176ff1f53331eb63">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Q250560: Terminal Server Hangs While Closing Down a Session | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Q250560: Terminal Server Hangs While Closing Down a Session" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/250/Q250560/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/250/Q250560/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/250/Q250560/","headline":"Q250560: Terminal Server Hangs While Closing Down a Session","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q250560-terminal-server-hangs-while-closing-down-a-session">Q250560: Terminal Server Hangs While Closing Down a Session</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q250560
Product(s): Microsoft Windows NT
Version(s): winnt:4.0
Operating System(s): 
Keyword(s): kbWinNT4sp6fix
Last Modified: 08-MAY-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Server version 4.0, Terminal Server Edition 
-------------------------------------------------------------------------------

SYMPTOMS
========

The Terminal Server randomly stops responding (hang) and you receive the
following error message on a blue screen:

  Stop 0x1Ee

CAUSE
=====

The error actually occurs when a Terminal Server client is logging off a
session. Terminal Server is trying to access the client's System Tray window
despite the fact that it has already been closed.

RESOLUTION
==========

To resolve this problem, obtain the latest service pack for Windows NT Server
version 4.0, Terminal Server Edition. For additional information, please see the
following article in the Microsoft Knowledge Base:

  Q152734 How to Obtain the Latest Windows NT 4.0 Service Pack


STATUS
======

This problem was first corrected in Windows NT Server version 4.0, Terminal
Server Edition Service Pack 6.

MORE INFORMATION
================

The stack trace from this hang looks something like this:

bd1d3d78 a304f6b0 a414cb88 0000019a a5081338 win32k!IsTrayWindow+0x40
bd1d3dbc a30292e7 a414cb88 e2893b68 a3054573 win32k!xxxDestroyWindow+0x233
bd1d3dc8 a3054573 a5081338 e2893c08 e2893b68 win32k!HMDestroyUnlockedObject+0x6f
bd1d3ddc a3054961 bd1d3e08 807b1184 00000000 win32k!DestroyThreadsObjects+0xa2
bd1d3df4 a3053865 807b1184 00000001 a305374a win32k!xxxDestroyThreadInfo+0x141
bd1d3e08 a30537b3 e2893b68 00000001 e2893b68 win32k!UserThreadCallout+0xad
bd1d3e1c 801a38cd e2893b68 00000001 807b1184 win32k!W32pThreadCallout+0x29
bd1d3ea4 801a35f8 00000000 82c7d608 8011c38d ntkrnlmp!PspExitThread+0x253
bd1d3eb0 8011c38d 82c7d608 bd1d3ee8 bd1d3ee4 ntkrnlmp!PsExitSpecialApc+0x1a
bd1d3eec 801475a4 00000001 00000000 bd1d3f04 ntkrnlmp!KiDeliverApc+0x181
bd1d3eec 77ee199f 00000001 00000000 bd1d3f04 ntkrnlmp!KiServiceExit+0x59
bd1d3d78 a304f6b0 a414cb88 0000019a a5081338 +0x77ee199f

The bottom of the stack may be different, but the problem always occurs in
win32k!IsTrayWindow.

Additional query words:

======================================================================
Keywords          : kbWinNT4sp6fix 
Technology        : kbWinNTsearch kbWinNT400search kbWinNTSsearch kbWinNTS400search kbNTTermServ400 kbNTTermServSearch
Version           : winnt:4.0
Hardware          : ALPHA x86
Issue type        : kbbug
Solution Type     : kbfix

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>