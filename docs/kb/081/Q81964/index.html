<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=4c5dc89ca309d19d6d9171a268a55a16d7399494">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Q81964: TSR Fails to Pop Up Under MS-DOS Versions 4.0 and Later | KnowledgeBase Archive</title>
<meta property="og:title" content="Q81964: TSR Fails to Pop Up Under MS-DOS Versions 4.0 and Later" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/081/Q81964/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/081/Q81964/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"name":null,"description":"An Archive of Early Microsoft KnowledgeBase Articles","author":null,"@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/081/Q81964/","publisher":null,"image":null,"headline":"Q81964: TSR Fails to Pop Up Under MS-DOS Versions 4.0 and Later","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q81964-tsr-fails-to-pop-up-under-ms-dos-versions-40-and-later">Q81964: TSR Fails to Pop Up Under MS-DOS Versions 4.0 and Later</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q81964
Product(s): Microsoft Disk Operating System
Version(s): MS-DOS:4.x,5.0,5.0a
Operating System(s): 
Keyword(s): 
Last Modified: 17-DEC-2000

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft MS-DOS operating system versions 4.0, 4.01, 5.0, 5.0a 
-------------------------------------------------------------------------------

SYMPTOMS
========

Terminate-and-stay-resident (TSR) programs do not activate when their hot keys
are pressed under MS-DOS versions 4.0 and later on a system with an enhanced
keyboard.

CAUSE
=====

One way the TSR programs wait to be activated is to hook the Int 16h ROM BIOS
keyboard service and wait for another program to call that function and request
keyboard input. The TSR then compares the key code returned by the ROM BIOS
service with the key code of its hot key.

With the introduction of the enhanced keyboard, two new ROM BIOS keyboard
services were added that supersede two of the original functions. MS-DOS
versions 4.0 and later are designed to recognize the enhanced keyboard and use
these two new functions instead of the old ones. This means that TSRs that watch
the ROM BIOS Int 16h service for calls to the original functions will never be
activated.

RESOLUTION
==========

There are two ways to solve this problem:

- The TSR must be updated to watch all four of the ROM BIOS keyboard read
  functions: 00h, 01h, 10h, and 11h.

-or-

- Add SWITCHES=/K or DEVICE=ANSI.SYS /K to your CONFIG.SYS file. This option
  causes MS-DOS versions 4.0 and later to use the old ROM BIOS keyboard read
  functions even when an enhanced keyboard is detected. This will solve the
  problem while MS-DOS is waiting for keyboard input, but other applications
  that call the new enhanced keyboard ROM BIOS services will still disable the
  TSR.

For more information on how MS-DOS reads from the keyboard, query on the
following words in the Microsoft Knowledge Base:

  CON ANSI SWITCHES

Additional query words: 4.00 4.00a 4.01 4.01a 5.00 5.00a noupd

======================================================================
Keywords          :  
Technology        : kbMSDOSSearch kbMSDOS400 kbMSDOS500 kbMSDOS401 kbMSDOS500a
Version           : MS-DOS:4.x,5.0,5.0a

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="http://github.com/jeffpar">jeffpar</a><br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>