<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=231b77c990cb1dad78d33119176ff1f53331eb63">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Q149471: PRB: Conflicting Definitions of time_t Between Windows and Mac | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Q149471: PRB: Conflicting Definitions of time_t Between Windows and Mac" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/149/Q149471/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/149/Q149471/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/149/Q149471/","headline":"Q149471: PRB: Conflicting Definitions of time_t Between Windows and Mac","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q149471-prb-conflicting-definitions-of-time_t-between-windows-and-mac">Q149471: PRB: Conflicting Definitions of time_t Between Windows and Mac</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q149471
Product(s): Microsoft C Compiler
Version(s): winnt:
Operating System(s): 
Keyword(s): kbinterop kbCRT kbVC
Last Modified: 30-JUL-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- The C Run-Time (CRT), included with:
   - Microsoft Visual C++, Macintosh Cross-Development Addon, versions 2.0, 4.0 
-------------------------------------------------------------------------------


SYMPTOMS
========

Mixing calls to both the Visual C++ C Runtime Library and native Macintosh
functions that rely on time_t may yield incorrect results. Most of these
functions can be found in Time.h.

CAUSE
=====

Both sets of libraries define time_t as the number of seconds elapsed since
epoch. However, Visual C++ defines epoch as 00:00:00 January 1, 1970 (GMT) and
stores the value as a signed 32-bit long. Native Macintosh functions define
epoch as 00:00:00 January 1, 1904 (GMT) and stores the value as an unsigned
32-bit long.

RESOLUTION
==========

If the source to the call to a time function is accessible, then offset the
value by 2,082,844,800 or by the value computed from the call to the Mac API
LongDateToSeconds().

     LongDateToSeconds(
         LongDateRec   lDate  // Jan 1, 1970 00:00:00
         LongDateTime* lSecs  // time_t equivalent returned
     )

If the calling module's source is inaccessible (as in many third-party
libraries), create an ASLM (Apple Shared Library Manager) module containing the
third-party library linked with Apple's native CRT, and export functions to call
the third-party library routines. This will allow you to use both CRT time
functions without conflicts.

STATUS
======

time_t has been a standard for representing time among many platforms. However,
the epoch that this is based on has not been standardized. Apple's standard is
different from those of Microsoft and UNIX System V.

REFERENCES
==========

Books Online

Additional query words:

======================================================================
Keywords          : kbinterop kbCRT kbVC 
Technology        : kbVCsearch kbAudDeveloper kbCRT
Version           : winnt:
Issue type        : kbprb

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>